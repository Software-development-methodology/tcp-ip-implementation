# 요구사항 명세서

## 요구사항 1 - Link Layer 구현
Ethernet 프로토콜을 사용
### 기능 1 - Framing 
- 송신 : 상위 계층에서 받은 데이터를 프레임으로 나눈다
     - MTU : 하나의 프레임 데이터는 46~1500 byte 로 제한한다
- 수신 : 프레임 형태로 도착했는지 확인
### 기능 2 - Addressing
- 송신 : 목적지 MAC 주소와 자신의 MAC 주소를 프레임 헤더에 추가한다
- 수신 : 자신의 MAC 주소와 목적지 MAC 주소가 같은지 비교하여 같으면 수신하고 같지 않으면 무시한다
### 기능 3 - Error Detection
- 송신 : CRC 값을 계산한 후, 프레임의 트레일러에 에러 검출 정보(CRC 값)를 추가
- 수신 : 수신한 데이터로 CRC 값을 계산해보고 수신한 CRC 값과 일치하는지 검사한다
### 기능 4 - Flow Control
- 송신 : Sliding-window? 
- 수신 : 수신 버퍼가 찼는지 확인하여 송신 장치에 신호를 보낸다
### 기능 5 - Media Access Control
- 송신 : CSMA/CD 로 네트워크 매체가 비어있는지 확인한다  
  충돌이 발생할 경우 백오프 후 재전송한다
- 수신 : 충돌로 인해 손상된 프레임인지 확인하고 손상되었으면 무시한다
### 기능 6 - Error Correction and Retransmission
- 송신 : 수신 장치로부터 에러가 발생했다는 신호를 받으면 재전송
- 수신 : 수신한 데이터로 CRC 값을 계산하여 수신한 프레임의 CRC 값과 비교하여 에러가 있는지 확인  
  에러가 발견되면 송신 장치에 재전송 요청
### 기능 7 - Data Transmission
- 송신 : 프레임을 수신 장치에게 송신한다
- 수신 : 헤더와 트레일러를 제거하고 데이터 부분만 상위 계층으로 전달한다

## 요구사항 2 - Internet Layer 구현
Internet 프로토콜(IP)을 사용
### 기능 1 - Logical Addressing
- 송신 : 출발지 IP 주소와 목적지 IP 주소를 지정한다
- 수신 : 목적지 IP 주소와 자신의 IP 주소를 비교하여 같으면 수신하고 같지 않으면 무시한다
### 기능 2 - Fragmentation and Reassembly
- 송신 : IP 패킷이 MTU 보다 크면 여러 조각으로 나눈다
- 수신 : 패킷의 조각들에 있는 식별자(ID), 오프셋, More Fragment 비트를 참고해 모든 조각이 다 도착했는지 확인하고, 원래의 데이터로 재조립한다
### 기능 3 - Routing
- 송신 : 자신의 서브넷 내에 있는지 확인해서 목적지가 자신과 같은 네트워크에 있으면 직접 보낸다  
아니면 라우터의 MAC 주소로 ARP를 통해 주소를 찾고 라우터로 보낸다
### 기능 4 - Error Detection
- ICMP를 통해 문제를 보고하거나 진단한다
### 기능 5 - Data Transmission
- 송신 : 헤더를 추가하여 패킷을 Link Layer로 전달한다
- 수신 : 헤더를 제거하고 데이터 부분만 상위 계층으로 전달한다

## 요구사항 3 - Transport Layer 구현
Transmission Control 프로토콜(TCP)을 사용
### 기능 1 - Target Identification
- 송신 : 출발지 포트 번호와 목적지 포트 번호를 헤더에 추가한다
- 수신 : 포트 번호에 따라 어느 어플리케이션으로 보낼지 식별한다
### 기능 2 - Segmentation and Reassembly
- 송신 : 상위 계층으로부터 받은 데이터를 세그먼트 단위로 나눈다
- 수신 : 시퀀스 번호를 기준으로 수신된 세그먼트를 정렬하고 재조립
### 기능 3 - Reliable Delivery
- 송신 : 수신 장치에서 ACK가 오기를 기다리고 일정 시간 내 오지 않으면 재전송한다
- 수신 : 세그먼트를 수신하면 ACK를 전송한다. 중복 세그먼트일 경우 무시하거나 다시 ACK를 보낸다
### 기능 4 - Flow Control
- 송신 : 수신 측이 알려준 윈도우 크기 만큼만 데이터를 보낸다
- 수신 : 자신의 버퍼 상황에 따라 수신 가능한 데이터의 양을 송신 측에 알려준다(윈도우 크기)
### 기능 5 - Congestion Control
- 송신 : 
### 기능 6 - Checksum
- 송신 : 세그먼트마다 체크섬을 계산하여 헤더에 추가한다
- 수신 : 체크섬 값을 계산하여 수신한 체크섬과 비교하고 다르면 재전송을 요청한다
### 기능 7 - Data Transmission
- 송신 : 헤더를 추가하여 세그먼트를 Internet Layer로 전달한다
- 수신 : 헤더를 제거하고 데이터 부분만 상위 계층으로 전달한다

## 요구사항 4 - Application Layer 구현
Hypertext Transfer 프로토콜(HTTP)을 사용한다
#### 송신
#### 기능 1 - URL 입력 받기
#### 기능 2 - HTTP 메세지 생성
#### 기능 3 - 세션/쿠키 정보 추가
#### 기능 4 - HTTP 헤더 생성
#### 기능 5 - 전송 데이터의 포맷 설정
#### 기능 6 - TCP 계층에 전달
### 수신
#### 기능 1 - 포트 번호 확인해서 특정 프로세스와 연결
#### 기능 2 - HTTP 메시지 파싱
#### 기능 3 - 세션/쿠키 처리
#### 기능 4 - 요청 처리
#### 기능 5 - 응답 메세지 생성
#### 기능 6 - TCP 계층에 응답 전달
